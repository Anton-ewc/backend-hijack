DOCTYPE(html)
html(lang='en')
    head
        title Hijack
        meta(charset='utf-8')
        meta(name='viewport' content='width=device-width')
        link(rel="icon" type="image/x-icon" href="../favicon.ico")
        link(href='https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css' rel='stylesheet' integrity='sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN' crossorigin='anonymous')
        link(rel='stylesheet' href='//unpkg.com/bootstrap@3.3.7/dist/css/bootstrap.min.css' type='text/css')
        link(rel='stylesheet' href='https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css')
        link(rel='stylesheet' type='text/css' href='/style.css')
        link(rel='stylesheet' href='//unpkg.com/bootstrap-select@1.12.4/dist/css/bootstrap-select.min.css' type='text/css')
        link(rel='stylesheet' href='//unpkg.com/bootstrap-select-country@4.0.0/dist/css/bootstrap-select-country.min.css' type='text/css')
        script(src='//unpkg.com/jquery@3.4.1/dist/jquery.min.js')
        script(src='//unpkg.com/bootstrap@3.3.7/dist/js/bootstrap.min.js')
        script(src='//unpkg.com/bootstrap-select@1.12.4/dist/js/bootstrap-select.min.js')
        script(src='//unpkg.com/bootstrap-select-country@4.0.0/dist/js/bootstrap-select-country.min.js')
        script(src='https://unpkg.com/htmx.org@1.9.9' integrity='sha384-QFjmbokDn2DjBjq+fM+8LUIVrAgqcNW2s0PjAxHETgRn9l4fvX31ZxDxvwQnyMOX' crossorigin='anonymous')
    body
        div(id="config-div")
            div(class="modal modal-blur fade" id="modals-here" tabindex="-1" role="dialog" style="display: none" aria-hidden="true")
                div(class="modal-dialog" role="document")
                    div(class="modal-content container config")
                        div(class="modal-header")
                            h1(class="h1 mb-0") Config
                        div(class="modal-body")
                            form(
                                id="config-form"
                                hx-post="/submit"
                                hx-target="this" hx-swap="outerHTML"
                                class="mb-3 needs-validation px-3"
                                _="on htmx:afterRequest location.reload();"
                            )
                                div(class="row")
                                    div(class="col")
                                        label(
                                            for="start_time"
                                        ) Start time:
                                        input(
                                            placeholder="Start time"
                                            type="time" 
                                            id="start_time" 
                                            name="start_time"
                                            class="form-control"
                                            hx-swap="this"
                                            value="00:00"
                                        )
                                    div(class="col")        
                                        label(
                                            for="end_time"
                                        ) Stop time:
                                        input(
                                            placeholder="End time"
                                            type="time" 
                                            id="end_time" 
                                            name="end_time"
                                            class="form-control"
                                            hx-swap="this"
                                            value="23:59"
                                        )
                                    div(class="col")        
                                        label(
                                            for="colddown"
                                        ) ColdDown:
                                        input(
                                            placeholder="ColdDown"
                                            type="text"
                                            name="colddown"
                                            id="colddown"
                                            class="form-control"
                                            value=300
                                        )
                                div(class="row")
                                    div(class="col")        
                                        input(
                                            type="checkbox" 
                                            id="sunday" 
                                            name="sunday"
                                            value="Sun"
                                            class="form-check-input"
                                            hx-swap="this"
                                            checked
                                        )
                                        label(
                                            for="sunday"
                                        ) Sun
                                    div(class="col")        
                                        input(
                                            type="checkbox" 
                                            id="monday" 
                                            name="monday"
                                            value="Mon" 
                                            class="form-check-input"
                                            hx-swap="this"
                                            checked
                                        )
                                        label(
                                            for="monday"
                                        ) Mon
                                    div(class="col")        
                                        input(
                                            type="checkbox" 
                                            id="tuesday" 
                                            value="Tue" 
                                            name="tuesday"
                                            class="form-check-input"
                                            hx-swap="this"
                                            checked
                                        )
                                        label(
                                            for="tuesday"
                                        ) Tue
                                    div(class="col")        
                                        input(
                                            type="checkbox" 
                                            id="wednesday" 
                                            name="wednesday"
                                            value="Wed" 
                                            class="form-check-input"
                                            hx-swap="this"
                                            checked
                                        )
                                        label(
                                            for="wednesday"
                                        ) Wed
                                    div(class="col")        
                                        input(
                                            type="checkbox" 
                                            id="thursday" 
                                            name="thursday"
                                            value="Thu" 
                                            class="form-check-input"
                                            hx-swap="this"
                                            checked
                                        )
                                        label(
                                            for="thursday"
                                        ) Thu
                                    div(class="col")        
                                        input(
                                            type="checkbox" 
                                            id="friday" 
                                            name="friday"
                                            value="Fri" 
                                            class="form-check-input"
                                            hx-swap="this"
                                            checked
                                        )
                                        label(
                                            for="friday"
                                        ) Fri
                                    div(class="col")        
                                        input(
                                            type="checkbox" 
                                            id="saturday"
                                            value="Sat" 
                                            name="saturday"
                                            class="form-check-input"
                                            hx-swap="this"
                                            checked
                                        )
                                        label(
                                            for="saturday"
                                        ) Sat
                                    div(class="col")        
                                        label(
                                            for="zzz"
                                        ) 
                                    div(class="col")        
                                        label(
                                            for="zzz"
                                        ) 
                                    div(class="col")        
                                        label(
                                            for="zzz"
                                        ) 
                                div(class="row")
                                    div(class="col")
                                        label(
                                            for="redirect_percent"
                                        ) % Redirect
                                        input(
                                            placeholder="% Redirect"
                                            type="number"
                                            name="redirect_percent"
                                            id="redirect_percent"
                                            class="form-control"
                                            value=10
                                            required
                                        )
                                    div(class="col")
                                        label(
                                            for="country"
                                            class="select-label"
                                        ) Country
                                        select(
                                            placeholder="Country"
                                            name="country"
                                            id="country"
                                            class=" form-control selectpicker countrypicker"
                                            data-live-search="true"
                                            data-actions-box="true"
                                            multiple
                                            value=null
                                        )
                                        
                                div(class="row")
                                    div(class="col")        
                                        label(
                                            for="url"
                                        ) URL
                                        input(
                                            placeholder="URL"
                                            type="text"
                                            name="url"
                                            id="url"
                                            class="form-control"
                                            value=null
                                        )
                                    div(class="col")        
                                        label(
                                            for="url_redirect"
                                        ) URL Redirect
                                        input(
                                            placeholder="URL Redirect"
                                            type="text"
                                            name="url_redirect"
                                            id="url_redirect"
                                            class="form-control"
                                            value=null required
                                        )

                                button(type="submit" class="add-redirect btn btn-info"  data-bs-dismiss="modal" id="config-submit" ) Create New Config
                        div(class="modal-footer" id="config-footer")
                            button(type="button" class="btn btn-secondary" data-dismiss="modal" onclick="location.reload()") Close
                            button(type="button" class="btn btn-info hidden" id="edit-config") Edit Config
            a(href="/logs" class="btn btn-secondary logs-link" ) Logs
            div(style="display:flex; justify-content:space-between; align-items:flex-end")
                h1(class="display-4 mb-2 title" ) Configs
                div(class="p-2")
                    button( type="button" class="btn btn-primary" data-toggle="modal" data-target="#modals-here" data-bs-toggle="modal" data-bs-target="#modals-here" ) Create New Config
            div( id="myGrid" style="width: 100%; height: 85vh" class="ag-theme-quartz")
            script(src="https://cdn.jsdelivr.net/npm/ag-grid-community@31.0.0/dist/ag-grid-community.min.js")
            script(type="text/javascript").
                var __basePath = './';
            script(src="ag-grid-enterprise.min.js")
            script.
                agGrid.LicenseManager.setLicenseKey("#{ag_key}");
            script( type="module" src="config.js")
        script.
            $('.countrypicker').countrypicker();
            const option = document.getElementById("country").appendChild(document.createElement("option"));
            option.setAttribute('value','')
            option.innerHTML = "None";
            $('.countrypicker').trigger('change');
        