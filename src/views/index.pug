DOCTYPE(html)
html(lang='en')
    head
        meta(charset='UTF-8')
        meta(name="viewport" content="width=device-width, initial-scale=1.0")
        title Config
        link(href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous")
        link(rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css")
        link(rel="stylesheet" type="text/css" href="/style.css")

        link(defer  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/css/bootstrap-select.min.css")
        link( defer  rel="stylesheet" href="//unpkg.com/bootstrap-select-country@4.0.0/dist/css/bootstrap-select-country.min.css" type="text/css")
        script(src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/js/bootstrap-select.min.js")
        script(src="//unpkg.com/jquery@3.4.1/dist/jquery.min.js")
        script(src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous")
        script(src="//unpkg.com/bootstrap-select-country@4.0.0/dist/js/bootstrap-select-country.min.js")

        script(src="https://unpkg.com/hyperscript.org@0.9.11")
        script(src="https://unpkg.com/htmx.org@1.9.6" integrity="sha384-FhXw7b6AlE/jyjlZH5iHa/tTe9EpJ1Y55RjcgPbjeWMskSxZt1v9qkxLJWNJaGni" crossorigin="anonymous")
    body
        div(id="config-div")
            a(href="/logs" class="btn btn-secondary") Logs
            div(class="container  config" )
                h1(class="h1 mb-0") Config
                form(
                    hx-post="/submit"
                    hx-swap="beforeend"
                    hx-target="#redirects"
                    class="mb-3 needs-validation px-3"
                    _="on htmx:afterRequest target.reset()"
                )
                    div(class="row")
                        div(class="col")
                            label(
                                for="start_time"
                            ) Start time:
                            input(
                                placeholder="Start time"
                                type="time" 
                                id="start_time" 
                                name="start_time"
                                class="form-control"
                                hx-swap="this"
                            )
                        div(class="col")        
                            label(
                                for="end_time"
                            ) Stop time:
                            input(
                                placeholder="End time"
                                type="time" 
                                id="end_time" 
                                name="end_time"
                                class="form-control"
                                hx-swap="this"
                            )
                    div(class="row")
                        div(class="col")        
                            input(
                                type="checkbox" 
                                id="sunday" 
                                name="sunday"
                                value="Sun"
                                class="form-check-input"
                                hx-swap="this"
                            )
                            label(
                                for="sunday"
                            ) Sun
                        div(class="col")        
                            input(
                                type="checkbox" 
                                id="monday" 
                                name="monday"
                                value="Mon" 
                                class="form-check-input"
                                hx-swap="this"
                            )
                            label(
                                for="monday"
                            ) Mon
                        div(class="col")        
                            input(
                                type="checkbox" 
                                id="tuesday" 
                                value="Tue" 
                                name="tuesday"
                                class="form-check-input"
                                hx-swap="this"
                            )
                            label(
                                for="tuesday"
                            ) Tue
                        div(class="col")        
                            input(
                                type="checkbox" 
                                id="wednesday" 
                                name="wednesday"
                                value="Wed" 
                                class="form-check-input"
                                hx-swap="this"
                            )
                            label(
                                for="wednesday"
                            ) Wed
                        div(class="col")        
                            input(
                                type="checkbox" 
                                id="thursday" 
                                name="thursday"
                                value="Thu" 
                                class="form-check-input"
                                hx-swap="this"
                            )
                            label(
                                for="thursday"
                            ) Thu
                        div(class="col")        
                            input(
                                type="checkbox" 
                                id="friday" 
                                name="friday"
                                value="Fri" 
                                class="form-check-input"
                                hx-swap="this"
                            )
                            label(
                                for="friday"
                            ) Fri
                        div(class="col")        
                            input(
                                type="checkbox" 
                                id="saturday"
                                value="Sat" 
                                name="saturday"
                                class="form-check-input"
                                hx-swap="this"
                            )
                            label(
                                for="saturday"
                            ) Sat
                    div(class="row")
                        div(class="col")
                            label(
                                for="redirect_percent"
                            ) % Redirect
                            input(
                                placeholder="% Redirect"
                                type="number"
                                name="redirect_percent"
                                id="redirect_percent"
                                class="form-control"
                                hx-swap="this"
                            )
                        div(class="col")
                            label(
                                for="country"
                                class="select-label"
                            ) Country
                            select(
                                placeholder="Country"
                                name="country"
                                id="country"
                                class=" form-control selectpicker countrypicker"
                                multiple
                            )
                    div(class="row")
                        div(class="col")        
                            label(
                                for="url"
                            ) URL
                            input(
                                placeholder="URL"
                                type="text"
                                name="url"
                                id="url"
                                class="form-control"
                            )
                        div(class="col")        
                            label(
                                for="url_redirect"
                            ) URL Redirect
                            input(
                                placeholder="URL Redirect"
                                type="text"
                                name="url_redirect"
                                id="url_redirect"
                                class="form-control"
                            )
                    button(type="submit" class="add-redirect btn btn-info") Add Config
            table(class="table table-striped")
                thead
                    tr
                        th(class="table-secondary") Url
                        th(class="table-secondary") URL Redirect
                        th(class="table-secondary") Country
                        th(class="table-secondary") % Redirect
                        th(class="table-secondary") Start Time
                        th(class="table-secondary") Stop Time
                        th(class="table-secondary") Days
                        th(class="table-secondary")
                tbody(id="redirects" hx-confirm="Are you sure?" hx-target="closest tr" hx-swap="outerHTML")
                    each redirect in redirects
                        tr
                            td #{redirect.url}
                            td #{redirect.url_redirect}
                            td #{redirect.country}
                            td 
                                span(class="badge bg-secondary") #{redirect.redirect_percent} %
                            td #{redirect.start_time}
                            td #{redirect.end_time}
                            td #{redirect.days}
                            td
                                button(class="btn btn-danger" hx-delete=`/delete/${redirect.id}`)
                                    i(class="bi bi-trash")
    script().
        $('.selectpicker').selectpicker();